<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Validation Help</title>
<style type="text/css">
<!--
.style1 {color: #990000}
.style2 {color: #990000; font-weight: bold; }
-->
</style>
</head>
<html>
  <head>
    <title>CdmValidation</title>
  </head>
  <body bgcolor="#FFFFFF">
    <LINK TYPE="text/css" HREF="/thredds/upc.css" REL="StyleSheet" />
    <h1>BUFR Record Validator Help    </h1>
  <hr>
  <p class="style2">A successful validation looks like this: </p>
  <h1>BUFR Validation Results</h1>
    <h2><span class="style1"> (1) </span>Dataset=john/IUA_EGRR_20060202_08.bufr</h2>
    <table border="1">
      <tbody>
        <tr>
          <th><p>record</p>
          <p class="style1">(2)</p></th>
          <th><p>nobs</p>
          <p class="style1">(3)</p></th>
          <th><p>WMO Header</p>
          <p class="style1">(4)</p></th>
          <th><p>center</p>
          <p class="style1">(5)</p></th>
          <th><p>category</p>
          <p class="style1">(6)</p></th>
          <th><p>date</p>
          <p class="style1">(7)</p></th>
          <th><p>dds</p>
          <p class="style1">(8)</p></th>
          <th><p>bitCount</p>
          <p class="style1">(9)</p></th>
        </tr>
        <tr>
          <td><strong><a href="#data">0</a></strong> </td>
          <td>6</td>
          <td>IUAE01 EGRR</td>
          <td>74.255 (UK Meteorological Office Bracknell (RSMC))</td>
          <td>Single level upper-air data (other than satellite) (4.255.0)</td>
          <td>2006-02-02T07:21:00Z</td>
          <td><strong><a href="#dds">ok</a></strong> </td>
          <td><strong><a href="#bitCount">ok</a></strong> </td>
        </tr>
        <tr>
          <td><strong><a href="#data">1 </a></strong></td>
          <td>6</td>
          <td>IUAD01 EGRR</td>
          <td>74.255 (UK Meteorological Office Bracknell (RSMC))</td>
          <td>Single level upper-air data (other than satellite) (4.255.0)</td>
          <td>2006-02-02T07:22:00Z</td>
          <td><strong><a href="#dds">ok</a></strong> </td>
          <td><strong><a href="#bitCount">ok</a></strong></td>
        </tr>
      </tbody>
    </table>
    <p class="style2">where</p>
    <ol>
      <li class="style1">The file or URL containing the BUFR records </li>
      <li class="style1">Each BUFR record in the file is processed independently, and is shown in one row of the table. The record is identified by a sequential number, starting at 0. <a href="#data">Click on it</a> for a data dump. </li>
      <li class="style1">This column shows the number of observations in this BUFR record. </li>
      <li class="style1"> A WMO header precedes the  BUFR record in the IDD data feed. If your file comes from a different source, this column is likely blank or has junk in it..</li>
      <li class="style1">The center and subcenter number, and the center name, from  section 1 of the BUFR record.</li>
      <li class="style1">The data category, subcategory, and ??, and the category name,  from  section 1 of the BUFR record.</li>
      <li class="style1">The date of the observation(s), from  section 1 of the BUFR record.</li>
      <li class="style1">Shows <em><strong>ok</strong></em>  if all of the Data Descriptors in the record are found. Missing or incomplete BUFR tables will fail here.  <a href="#dds">Click on it </a>to show the record metadata and list of Data Descriptors. </li>
      <li class="style1">Shows <em><strong>ok</strong></em> if the number of bits in the data section agrees with the  Data Descriptors. Incorrect BUFR tables or incorrectly written records will fail here. <a href="#bitCount">Click on it</a> to see detailed parsing and bit counting of the record values. </li>
  </ol>
    <h3>Show data<a name="data"></a> </h3>
    <p id="line1">A data dump formats the contents of the message in an simple, ad-hoc XML format, for example: </p>
    <pre>
 &lt;bufrMessages&gt;
<strong>(1)</strong>&lt;bufrMessage nobs=&quot;1&quot;&gt;
<strong>(2)</strong>  &lt;center&gt;7.3 (NCEP /  Central Operations)&lt;/center&gt;
     &lt;table&gt;0.12.0&lt;/table&gt;
     &lt;category&gt;Synoptic features (7.0.0)&lt;/category&gt;
<strong>(3)</strong>  &lt;obs&gt;
<strong>(4)</strong>    &lt;data name=&quot;time&quot; units=&quot;minutes since 2008-07-07T19:00:00Z&quot; bufr=&quot;N/A&quot;&gt;-60 &lt;/data&gt;
<strong>(5)</strong>    &lt;data name=&quot;Identification_of_originating_or_generating_centre&quot; bufr=&quot;0-1-33&quot;&gt;52 &lt;/data&gt;
       &lt;data name=&quot;Storm_identifier&quot; bufr=&quot;0-1-25&quot;&gt;02L&lt;/data&gt;
       &lt;data name=&quot;WMO_storm_name&quot; bufr=&quot;0-1-26&quot;&gt;BERTHA  &lt;/data&gt;
<strong>(6)</strong>    &lt;data name=&quot;Year&quot; bufr=&quot;0-4-1&quot;&gt;2008 &lt;/data&gt;
       &lt;data name=&quot;Month&quot; bufr=&quot;0-4-2&quot;&gt;7 &lt;/data&gt;
       &lt;data name=&quot;Day&quot; bufr=&quot;0-4-3&quot;&gt;7 &lt;/data&gt;
       &lt;data name=&quot;Hour&quot; bufr=&quot;0-4-4&quot;&gt;18 &lt;/data&gt;
       &lt;data name=&quot;Minute&quot; bufr=&quot;0-4-5&quot;&gt;0 &lt;/data&gt;
       &lt;data name=&quot;Latitude&quot; units=&quot;degrees_north&quot; bufr=&quot;0-5-2&quot;&gt;19.900&lt;/data&gt;
       &lt;data name=&quot;Longitude&quot; units=&quot;degrees_east&quot; bufr=&quot;0-6-2&quot;&gt;-51.6000&lt;/data&gt;
       &lt;data name=&quot;Type_of_synoptic_feature&quot; bufr=&quot;0-19-1&quot;&gt;Typhoon &lt;/data&gt;
       &lt;data name=&quot;Direction_of_motion_of_feature&quot; units=&quot;Degree true&quot; bufr=&quot;0-19-5&quot;&gt;290 &lt;/data&gt;
       &lt;data name=&quot;Speed_of_motion_of_feature&quot; units=&quot;m s-1&quot; bufr=&quot;0-19-6&quot;&gt;6.2000&lt;/data&gt;
       &lt;data name=&quot;Vertical_extent_of_circulation&quot; bufr=&quot;0-19-8&quot;&gt;Deep (top above 400 hPa level) &lt;/data&gt;
       &lt;data name=&quot;Meteorological_attribute_significance&quot; bufr=&quot;0-8-5&quot;&gt;Storm center &lt;/data&gt;<strong>
       </strong>&lt;data name=&quot;Pressure&quot; units=&quot;Pa&quot; bufr=&quot;0-10-4&quot;&gt;97000&lt;/data&gt;
<strong>(7)</strong>    &lt;data name=&quot;Meteorological_attribute_significance-1&quot; bufr=&quot;0-8-5&quot;&gt;Outer limit or edge of storm &lt;/data&gt;
       ...</pre>
    <ol>
      <li>Each BUFR record is contained in a &lt;bufrMessage&gt; element, which has the number of observations in the message as an attribute. </li>
      <li>Metdata from section 1 of the BUFR record.</li>
      <li>Each observation is contained in a &lt;obs&gt; element.</li>
      <li>The time of the observation is calculated from the fields in (6), and made into a udunits date.</li>
      <li>Each    field of the dds is contained in a &lt;data&gt; element. The name and units (if any) and the BUFR table code are shown as attributes. The data value has been converted using the scale and offset.</li>
      <li>The time coordinates of the observation.</li>
      <li>When the field is a code lookup, the value is the string value rather than the code number. </li>
    </ol>
    <h3>Show Data Descriptors<a name="dds"></a></h3>
    <p>A DDS dump shows the processing of section 3 of the BUFR record (data descriptor section), for example: </p>
    <pre><strong>(1)</strong>
	 BUFR edition 3 time= 2008-07-07T17:00:00Z wmoHeader=497 IUPT43 KBOU 071700 hash=[0x4968e748] 
   Category= 2 Vertical soundings (other than satellite) 2.0 local= 0 
   Center= The NOAA Forecast Systems Laboratory 59.0 
   Table= 0.3 local= 3 wmoTable= B4M-000-013 localTable= B3L-059-003-ABD.diff
  DDS nsubsets=1 type=0x80 isObs=true isCompressed=false
  startPos=30 len=656 endPos=686 dataStart=106 dataLen=576 dataEnd=682 

<strong>(2)</strong>
    3-1-32  : tableD isWMO =true
      3-1-1   : tableD isWMO =true
        0-1-1   : WMO_block_number units=Numeric scale=0 refVal=0 nbits=7 isWMO=true
        0-1-2   : WMO_station_number units=Numeric scale=0 refVal=0 nbits=10 isWMO=true
      0-2-1   : Type_of_station units=Code table scale=0 refVal=0 nbits=2 isWMO=true
      3-1-11  : tableD isWMO =true
        0-4-1   : Year units=Year scale=0 refVal=0 nbits=12 isWMO=true
        0-4-2   : Month units=Month scale=0 refVal=0 nbits=4 isWMO=true
        0-4-3   : Day units=Day scale=0 refVal=0 nbits=6 isWMO=true
      3-1-12  : tableD isWMO =true
        0-4-4   : Hour units=Hour scale=0 refVal=0 nbits=5 isWMO=true
        0-4-5   : Minute units=Minute scale=0 refVal=0 nbits=6 isWMO=true
      3-1-24  : tableD isWMO =true
        0-5-2   : Latitude units=Degree scale=2 refVal=-9000 nbits=15 isWMO=true
        0-6-2   : Longitude units=Degree scale=2 refVal=-18000 nbits=16 isWMO=true
        0-7-1   : Height_of_station units=m scale=0 refVal=-400 nbits=15 isWMO=true
    0-1-18  : Short_station_or_site_name units=CCITT IA5 nchars=5 isWMO=true
    0-2-3   : Type_of_measuring_equipment_used units=Code table scale=0 refVal=0 nbits=4 isWMO=true
    2-1-132 : tableC-operators
    2-2-130 : tableC-operators
    0-2-121 : Mean_frequency units=Hz scale=-8 refVal=0 nbits=7 isWMO=true
    2-2-0   : tableC-operators
    2-1-0   : tableC-operators
    0-8-21  : Time_significance units=Code table scale=0 refVal=0 nbits=5 isWMO=true
    0-4-26  : Time_period_or_displacement units=Second scale=0 refVal=-4096 nbits=13 isWMO=true
    1-9-0   : replication
    0-31-1  : Delayed_descriptor_replication_factor units=Numeric scale=0 refVal=0 nbits=8 isWMO=true
    0-7-6   : Height_above_station units=m scale=0 refVal=0 nbits=15 isWMO=true
    0-25-34 : Wind_profiler_quality_control_test_results units=Flag table scale=0 refVal=0 nbits=4 isWMO=true
    0-11-1  : Wind_direction units=Degree true scale=0 refVal=0 nbits=9 isWMO=true
    0-11-2  : Wind_speed units=m s-1 scale=1 refVal=0 nbits=12 isWMO=true
    2-1-127 : tableC-operators
    0-11-50 : Standard_deviation_of_horizontal_wind_speed units=m s-1 scale=1 refVal=0 nbits=12 isWMO=true
    2-1-0   : tableC-operators
    0-11-6  : w-component units=m s-1 scale=2 refVal=-4096 nbits=13 isWMO=true
    0-11-51 : Standard_deviation_of_vertical_wind_speed units=m s-1 scale=1 refVal=0 nbits=8 isWMO=true
<strong>(3)</strong>
  CDM Nested Table=
    0-1-1: WMO_block_number units=Numeric scale=0 refVal=0 nbits=7
    0-1-2: WMO_station_number units=Numeric scale=0 refVal=0 nbits=10
    0-2-1: Type_of_station units=Code table enum nbits=2
    0-4-1: Year units=Year scale=0 refVal=0 nbits=12
    0-4-2: Month units=Month scale=0 refVal=0 nbits=4
    0-4-3: Day units=Day scale=0 refVal=0 nbits=6
    0-4-4: Hour units=Hour scale=0 refVal=0 nbits=5
    0-4-5: Minute units=Minute scale=0 refVal=0 nbits=6
    0-5-2: Latitude units=Degree scale=2 refVal=-9000 nbits=15
    0-6-2: Longitude units=Degree scale=2 refVal=-18000 nbits=16
    0-7-1: Height_of_station units=m scale=0 refVal=-400 nbits=15
    0-1-18: Short_station_or_site_name units=CCITT IA5 nchars=5
    0-2-3: Type_of_measuring_equipment_used units=Code table enum nbits=4
    0-2-121: Mean_frequency units=Hz scale=-6 refVal=0 nbits=11
    0-8-21: Time_significance units=Code table enum nbits=5
    0-4-26: Time_period_or_displacement units=Second scale=0 refVal=-4096 nbits=13
    1-9-0: replication count=0 replicationCountSize=8
      0-7-6: Height_above_station units=m scale=0 refVal=0 nbits=15
      0-25-34: Wind_profiler_quality_control_test_results units=Flag table scale=0 refVal=0 nbits=4
      0-11-1: Wind_direction units=Degree true scale=0 refVal=0 nbits=9
      0-11-2: Wind_speed units=m s-1 scale=1 refVal=0 nbits=12
      0-11-50: Standard_deviation_of_horizontal_wind_speed units=m s-1 scale=1 refVal=0 nbits=11
      0-11-6: w-component units=m s-1 scale=2 refVal=-4096 nbits=13
      0-11-51: Standard_deviation_of_vertical_wind_speed units=m s-1 scale=1 refVal=0 nbits=8
 </pre>
    <ol>
      <li>Some of the metadata of the BUFR record</li>
      <li>The raw dds, with the table D elements expanded</li>
      <li>The processed dds, which the CDM uses to map into netCDF. Table D elements are discarded, operators are applied. Whats left are the actual data fields. </li>
    </ol>
    <h3>Show bitCount processing<a name="bitCount"></a>  </h3>
    <p>Bit count processing is a very low level dump, which may be useful in debugging encoding/decoding errors. An example uncompressed message: </p>
    <pre>

<strong>(1)</strong>
 Count bits in observation 0
  read 0-1-1 bitWidth=7 end at= 0x6f raw=74 convert=74.000000
  read 0-1-2 bitWidth=10 end at= 0x71 raw=647 convert=647.000000
  read 0-2-1 bitWidth=2 end at= 0x71 raw=2 convert=2.000000
  read 0-4-1 bitWidth=12 end at= 0x72 raw=2008 convert=2008.000000
  read 0-4-2 bitWidth=4 end at= 0x73 raw=7 convert=7.000000
  read 0-4-3 bitWidth=6 end at= 0x74 raw=7 convert=7.000000
  read 0-4-4 bitWidth=5 end at= 0x74 raw=17 convert=17.000000
  read 0-4-5 bitWidth=6 end at= 0x75 raw=0 convert=0.000000
  read 0-5-2 bitWidth=15 end at= 0x77 raw=12669 convert=36.689999
  read 0-6-2 bitWidth=16 end at= 0x79 raw=8252 convert=-97.479996
  read 0-7-1 bitWidth=15 end at= 0x7b raw=706 convert=306.000000
  read char 0-1-18 bitWidth=40 end at= 0x80 val=LMNO2
  read 0-2-3 bitWidth=4 end at= 0x80 raw=6 convert=6.000000
  read 0-2-121 bitWidth=11 end at= 0x82 raw=404 convert=404000000.000000
  read 0-8-21 bitWidth=5 end at= 0x82 raw=2 convert=2.000000
  read 0-4-26 bitWidth=13 end at= 0x84 raw=496 convert=-3600.000000
  read sequence 1-9-0 count= 61 bitSize=8 start at=0x85 
<strong> (2)</strong>
  read row 0 (seq 1-9-0) of obs 0 
    read 0-7-6 bitWidth=15 end at= 0x87 raw=500 convert=500.000000
    read 0-25-34 bitWidth=4 end at= 0x87 raw=0 convert=0.000000
    read 0-11-1 bitWidth=9 end at= 0x88 raw=244 convert=244.000000
    read 0-11-2 bitWidth=12 end at= 0x8a raw=32 convert=3.200000
    read 0-11-50 bitWidth=11 end at= 0x8b raw=18 convert=1.800000
    read 0-11-6 bitWidth=13 end at= 0x8d raw=4128 convert=0.320000
    read 0-11-51 bitWidth=8 end at= 0x8e raw=11 convert=1.100000
 <strong>(3)</strong>
  read row 1 (seq 1-9-0) of obs 0 
    read 0-7-6 bitWidth=15 end at= 0x90 raw=750 convert=750.000000
    ...
</pre>
    <ol>
      <li>Each observation in the message is processed, starting with the first one. Each field is processed in order, showing the number of bits, starting and ending byte, raw and converted value. </li>
      <li>The first  <em>row</em> of a  replicated field (in this case a delayed replication with variable number of rows) is displayed with its members indented.</li>
      <li>The second row of the replication, etc.  </li>
    </ol>
    <p>An example compressed message:</p>
    <pre><strong>(1)</strong>read Latitude (0-5-2) bitWidth=15 dataMin=12657 dataWidth=11 n=630 bitOffset=47341 
     443 (41.000000) 443 (41.000000) 443 (41.000000) 443 (41.000000) 443 (41.000000) ...
<strong>(2)</strong>read Longitude (0-6-2) bitWidth=16 dataMin=9580 dataWidth=11 n=630 bitOffset=54293 
     947 (-74.730000) 947 (-74.730000) 947 (-74.730000) 947 (-74.730000) 947 (-74.730000) ...
<strong>(3)</strong>read Year (0-4-1) bitWidth=12 dataMin=2008 dataWidth=0 n=630 bitOffset=54311 
  read Month (0-4-2) bitWidth=4 dataMin=7 dataWidth=0 n=630 bitOffset=54321 
  read Day (0-4-3) bitWidth=6 dataMin=28 dataWidth=0 n=630 bitOffset=54333
  read Nighttime_minimum_temperature (0-12-201) bitWidth=12 dataMin=2925 dataWidth=6 n=630 bitOffset=79695
    0 (292.500000) 63 (298.800000) 63 (298.800000) 63 (298.800000) 63 (298.800000) 63 (298.800000) ...
  ...
</pre>
    <ol>
      <li>The first  field in the dds is processed, for all the observations. In this example there are 630 observations, and  the first few values are shown here (all are shown in the actual output). Both raw and converted values are shown. The bit offset is the count in bits from the start of the data section. </li>
      <li> The second field, etc</li>
      <li>The next several fields have dataWidth = 0, which means use the dataMin value. <br>
          <br>
      </li>
    </ol>
    <pre>&nbsp;    
 </pre>
    <hr WIDTH="100%">
    <address>
    <a href="NetcdfUsers.htm"><img src="nc.gif" width="64" height="64" border="0"></a> This document is maintained by <a href="mailto:caron@unidata.ucar.edu">John Caron</a> and was last updated on Sep 13, 2008
    </address>
    <blockquote>&nbsp;</blockquote>
  </body>
</html>


